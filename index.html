<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>永濟中醫診所｜線上預約</title>

<!-- 思源宋體 -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;600;700;900&display=swap" rel="stylesheet">

<style>
:root{
  --brand:#6b5844;        /* 標題深木色 */
  --brand-600:#5a4a3a;
  --ink:#2a231b;          /* 文字主色 */
  --muted:#6f6a62;        /* 次要文字 */
  --bg:#f7f4f0;           /* 米白底 */
  --card:#ffffff;         /* 卡片底 */
  --line:#e6dfd6;         /* 邊框色 */

  /* 時段色塊 */
  --early:#8b5e3c;   /* 早診 木棕 */
  --noon:#a68b6a;    /* 午診 茶卡 */
  --night:#6c7a89;   /* 晚診 灰藍 */

  --cap:#e9e2d8;     /* 方塊底色 */
  --cap-bd:#cbbfaa;  /* 方塊邊框 */
}

*{box-sizing:border-box}
body{
  margin:0;background:var(--bg);color:var(--ink);
  font-family:"Noto Serif TC","Source Han Serif TC",serif;
}
.container{max-width:980px;margin:20px auto;padding:0 14px}
.h1{display:flex;align-items:center;gap:10px;font-weight:900;font-size:clamp(22px,4.2vw,32px);color:var(--brand)}
.badge{background:var(--brand);color:#fff;border-radius:10px;width:42px;height:42px;display:grid;place-items:center;font-weight:900}
.section{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin-top:14px}
.tt{font-weight:900;margin:6px 2px 10px;color:var(--brand)}
.note{color:var(--muted);font-size:.92rem}

/* doctor chips → 方形色塊 */
.filters{display:flex;gap:8px;flex-wrap:wrap}
.chip{
  border:1px solid var(--line);border-radius:6px;background:#fff;
  padding:.42rem .9rem;font-weight:700;cursor:pointer;
}
.chip[aria-pressed="true"]{background:#efe7db;border-color:#d7c9b5;color:var(--brand)}

/* calendar (narrow) */
.grid7{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
.wd{color:#8b8379;text-align:center;font-weight:800;font-size:.82rem}
.day{
  min-height:76px;font-size:.78rem;background:#fff;border:1px solid var(--line);border-radius:8px;
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;gap:6px;padding:6px;
}
.day.clickable{cursor:pointer}
.day.clickable:hover{box-shadow:0 0 0 2px #e0d5c7}
.day.today{background:#3a3128;color:#fff;border-color:#3a3128}
.day .d{font-weight:900;font-size:.9rem}

/* 三個時段 → 方形色塊 */
.block{
  display:inline-block;border-radius:6px;padding:2px 8px;font-size:.72rem;font-weight:800;color:#fff;
}
.block.early{background:var(--early)}
.block.noon {background:var(--noon)}
.block.night{background:var(--night)}
.block.dim{opacity:.35}

/* slot groups */
.slot{
  border:1px solid var(--line);border-radius:10px;padding:12px;background:#fff;
  display:flex;gap:10px;align-items:center
}
.slot .remain{margin-left:auto;color:#5a5248}

/* 15 分鐘方塊按鈕 */
.caps{margin:8px 0 14px 0;display:flex;flex-wrap:wrap;gap:8px}
.caps button{
  border:1px solid var(--cap-bd);background:var(--cap);border-radius:6px;
  padding:.5rem .8rem;font-weight:700;cursor:pointer
}
.caps button[aria-pressed="true"]{
  background:#d7c9b5;border-color:#bba78f
}

/* 表單 */
.form{display:grid;gap:12px}
.input{
  border:1px solid var(--line);border-radius:8px;height:46px;padding:0 .9rem;background:#fff;
  font-family:"Noto Serif TC",serif
}
.btn{border:none;border-radius:8px;padding:1rem 1.2rem;font-weight:800;cursor:pointer;font-family:"Noto Serif TC",serif}
.btn-main{background:var(--brand);color:#fff}
.btn-main:hover{background:var(--brand-600)}
.btn-ghost{background:#fff;border:1px solid var(--line);color:var(--brand)}

/* 已選卡片 */
.chosen{
  border:1px dashed #d8cbb9;border-radius:10px;background:#fbf8f3;padding:12px;font-weight:800;display:flex;flex-wrap:wrap;gap:8px;align-items:center
}
.chosen .tag{border:1px solid #e0d5c7;border-radius:6px;padding:.35rem .7rem;background:#fff}
</style>
</head>
<body>
<div class="container">
  <div class="h1"><div class="badge">＋</div> 永濟中醫診所｜線上預約</div>

  <!-- 醫師（可複選） -->
  <div class="section">
    <div class="tt">請先選擇醫師（可複選）</div>
    <div class="filters" id="docFilters"></div>
    <div class="note">若不挑醫師，可同時勾選多位，系統會聚合顯示。</div>
  </div>

  <!-- 月曆 & 時段 -->
  <div class="section">
    <div class="tt" id="rangeNote">可預約日</div>
    <div class="grid7" id="wdRow"></div>
    <div class="grid7" id="days"></div>
    <div class="tt" style="margin-top:12px">當日可預約（醫師 → 時段 → 15 分鐘）</div>
    <div id="slotGroups" style="display:grid;gap:12px"></div>
  </div>

  <!-- 已選卡片 + 表單 -->
  <div class="section">
    <div class="tt">已選擇</div>
    <div id="chosen" class="chosen">尚未選擇</div>

    <div class="form" style="margin-top:12px">
      <input id="name" class="input" placeholder="姓名 *"/>
      <input id="birthday" class="input" type="date" placeholder="出生年月日 *"/>
      <input id="idnum" class="input" maxlength="10" placeholder="身分證字號 *"/>
      <input id="phone" class="input" maxlength="10" inputmode="numeric" placeholder="聯絡電話 *"/>
      <label><input type="checkbox" id="agree"/> 我已閱讀並同意預約須知</label>
      <button class="btn btn-main" id="submit">送出預約</button>
      <button class="btn btn-ghost" id="btnQuery" type="button">查詢/取消（稍後提供）</button>
    </div>
  </div>
</div>

<script>
/* 後端 API URL */
const SCRIPT_URL='https://script.google.com/macros/s/AKfycbw5MKdIYDYD7dO2U4rKA06odv9rhO5Zo_qrOhbmtAuy2ygvxSQSmxXZJNU9Zi2ubUVU/exec';
/* …原本的 JS 保持一致（slots, chosen 等函式） */
</script>
</body>
</html>
